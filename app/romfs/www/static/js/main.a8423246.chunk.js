(this["webpackJsonpnxgallery-frontend"]=this["webpackJsonpnxgallery-frontend"]||[]).push([[0],{194:function(e,t,a){"use strict";a.r(t);var n=a(59),r=a(60),i=a(35),c=a(63),s=a(62),l=a(0),o=a.n(l),h=a(12),d=a.n(h),j=a(48),g=a(61),b=a(189),m=a(191),O=a(205),x=a(207),u=a(192),p=a(208),y=a(209),f=a(210),v=a(49),k=a(18),C=a(211),S=a(212),w=a(213),N=a(50),D=a(38),P=a(214),T=a(215),G=a(216),A=a(3),_=function(){return console.log("Dev mode: false"),""},B=Object(j.a)({palette:{type:"light",primary:{main:"#04c7c3"},secondary:{main:"#19857b"},error:{main:g.a.red.A400},background:{default:"#ebebeb"}}}),F=Object(j.a)({palette:{type:"dark",primary:{main:"#50f4dc"},secondary:{main:"#19857b"},error:{main:g.a.red.A400},background:{default:"#2d2d2d"}}}),L=window.matchMedia(B.breakpoints.down("sm").replace("@media ","")).matches,M=function(e){Object(c.a)(a,e);var t=Object(s.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={item:e.item,isVideo:"video"===e.item.type,dialogOpen:!1},r.imageClicked=r.imageClicked.bind(Object(i.a)(r)),r.dialogClose=r.dialogClose.bind(Object(i.a)(r)),r}return Object(r.a)(a,[{key:"imageClicked",value:function(){this.setState({dialogOpen:!0})}},{key:"dialogClose",value:function(){this.setState({dialogOpen:!1})}},{key:"getDateString",value:function(){var e=new Date(1e3*this.state.item.takenAt);return e.toLocaleDateString()+" "+e.toLocaleTimeString()}},{key:"getDownloadFilename",value:function(){var e=this.getDateString();e=e.replace(/[:.\s]/g,"_");var t="video"===this.state.item.type?".mp4":".jpg";return this.state.item.game.replace(/\s/g,"_")+"_"+e+t}},{key:"render",value:function(){var e,t,a=_()+"/thumbnail?id="+this.state.item.id,n=_()+"/file?id="+this.state.item.id;return this.state.isVideo?(e=Object(A.jsx)("video",{src:n,controls:!0,preload:"none",poster:a}),t=Object(A.jsx)("video",{src:n,controls:!0,preload:"none",className:"gallery-content-big",poster:a})):(e=Object(A.jsx)("img",{src:a,alt:""}),t=Object(A.jsx)("a",{href:n,target:"_blank",rel:"noreferrer",children:Object(A.jsx)("img",{src:n,className:"gallery-content-big",alt:""})})),Object(A.jsxs)(b.a,{item:!0,xs:L?12:4,children:[Object(A.jsx)(m.a,{onClick:this.imageClicked,elevation:2,className:"grid-cell",children:e}),Object(A.jsxs)(O.a,{fullScreen:L,open:this.state.dialogOpen,onClose:this.dialogClose,"aria-labelledby":"responsive-dialog-title",children:[Object(A.jsxs)(x.a,{children:[t,Object(A.jsx)("div",{className:"gallery-content-bar",children:Object(A.jsx)("a",{download:this.getDownloadFilename(),href:this.state.item.path,children:Object(A.jsxs)(u.a,{color:"primary",children:[Object(A.jsx)("i",{className:"fas fa-download"})," Download"]})})}),Object(A.jsx)(p.a,{children:Object(A.jsx)(y.a,{children:Object(A.jsxs)(f.a,{children:[Object(A.jsxs)(v.a,{children:[Object(A.jsx)(k.a,{children:Object(A.jsx)("b",{children:"Type"})}),Object(A.jsx)(k.a,{align:"right",children:"video"===this.state.item.type?"Video":"Screenshot"})]}),Object(A.jsxs)(v.a,{children:[Object(A.jsx)(k.a,{children:Object(A.jsx)("b",{children:"Taken at"})}),Object(A.jsx)(k.a,{align:"right",children:this.getDateString()})]}),Object(A.jsxs)(v.a,{children:[Object(A.jsx)(k.a,{children:Object(A.jsx)("b",{children:"Game"})}),Object(A.jsx)(k.a,{align:"right",children:this.state.item.game})]}),Object(A.jsxs)(v.a,{children:[Object(A.jsx)(k.a,{children:Object(A.jsx)("b",{children:"Stored at"})}),Object(A.jsx)(k.a,{align:"right",children:"sd"===this.state.item.storedAt?"SD Card":"Internal Storage"})]})]})})})]}),Object(A.jsx)(C.a,{children:Object(A.jsx)(u.a,{autoFocus:!0,color:"primary",onClick:this.dialogClose,children:"Close"})})]})]})}}]),a}(o.a.Component),V=function(e){Object(c.a)(a,e);var t=Object(s.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={galleryContent:[],currentPage:1,maxPages:1,currentTheme:"light",error:!1},r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){this.fetchGallery()}},{key:"fetchGallery",value:function(){var e=this;fetch(_()+"/gallery?page="+this.state.currentPage).then((function(e){return e.json()})).then((function(t){e.setState({galleryContent:t.gallery,maxPages:t.pages,currentTheme:t.theme,error:!1})}),(function(t){e.setState({error:!0})}))}},{key:"onPageChange",value:function(e,t){var a=this;this.setState({currentPage:t},(function(){a.fetchGallery()}))}},{key:"render",value:function(){var e=this;return Object(A.jsxs)(S.a,{theme:"light"===this.state.currentTheme?B:F,children:[Object(A.jsx)(w.a,{}),Object(A.jsxs)(N.a,{style:{flexGrow:1,padding:"8px"},children:[Object(A.jsxs)(D.a,{variant:"h2",color:"textPrimary",align:"center",children:["NXGallery",Object(A.jsx)("a",{href:"https://github.com/iUltimateLP/NXGallery",target:"_blank",rel:"noreferrer",children:Object(A.jsx)("i",{className:"fab fa-github ".concat(this.state.currentTheme)})})]}),Object(A.jsx)(D.a,{variant:"h6",color:"textSecondary",align:"center",style:{paddingBottom:"16px",fontWeight:"100"},children:"Browse your Nintendo Switch album with ease!"}),Object(A.jsx)(b.a,{container:!0,spacing:2,justifyContent:"center",children:this.state.galleryContent.map((function(e){return Object(A.jsx)(M,{item:e},e.takenAt)}))}),this.state.error&&Object(A.jsx)(D.a,{variant:"h6",color:"error",align:"center",children:"Oh no, an error has occured :("}),0===this.state.galleryContent.length&&!this.state.error&&Object(A.jsx)(N.a,{align:"center",style:{paddingTop:"20px"},children:Object(A.jsx)(P.a,{color:"primary"})}),this.state.galleryContent.length>0&&!this.state.error&&Object(A.jsx)(N.a,{align:"center",style:{paddingTop:"20px",paddingBottom:"12px"},children:Object(A.jsx)(G.a,{count:this.state.maxPages,className:"pagination",onChange:function(t,a){return e.onPageChange(t,a)}})}),Object(A.jsxs)(N.a,{align:"center",className:"footer",children:[Object(A.jsx)(D.a,{variant:"overline",color:"textSecondary",align:"center",children:"Made with"}),Object(A.jsx)(T.a,{className:"heart",children:"favorite"}),Object(A.jsx)(D.a,{variant:"overline",color:"textSecondary",align:"center",children:"in Bremen, Germany"}),Object(A.jsx)("br",{})]})]})]})}}]),a}(o.a.Component);d.a.render(Object(A.jsx)(V,{}),document.querySelector("#app-root"))}},[[194,1,2]]]);
//# sourceMappingURL=main.a8423246.chunk.js.map