{"version":3,"sources":["index.js"],"names":["lightTheme","createTheme","palette","type","primary","main","secondary","error","colors","red","A400","background","default","darkTheme","isSM","window","matchMedia","breakpoints","down","replace","matches","GalleryItem","props","state","item","isVideo","dialogOpen","imageClicked","bind","dialogClose","this","setState","date","Date","takenAt","toLocaleDateString","toLocaleTimeString","getDateString","extension","game","size","i","Math","floor","log","pow","toFixed","viewElement","viewElementBig","previewURL","id","fullURL","src","controls","preload","poster","className","alt","href","target","rel","xs","onClick","elevation","fullScreen","open","onClose","download","getDownloadFilename","path","color","align","storedAt","humanFileSize","fileSize","React","Component","App","galleryContent","currentPage","maxPages","currentTheme","fetchGallery","fetch","then","res","json","result","gallery","pages","theme","e","page","style","flexGrow","padding","variant","paddingBottom","fontWeight","container","spacing","justifyContent","map","value","length","paddingTop","count","onChange","onPageChange","ReactDOM","render","document","querySelector"],"mappings":"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","file":"static/js/main.c54208c3.chunk.js","sourcesContent":["/*\r\n    NXGallery for Nintendo Switch\r\n    Made with love by Jonathan Verbeek (jverbeek.de)\r\n*/\r\n\r\nimport React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\n\r\n// Material UI imports\r\nimport {\r\n    colors,\r\n    CssBaseline,\r\n    ThemeProvider,\r\n    Typography,\r\n    Container,\r\n    createTheme,\r\n    Button,\r\n    Grid,\r\n    Paper,\r\n    Icon,\r\n    CircularProgress,\r\n    Dialog,\r\n    DialogContent,\r\n    DialogActions,\r\n    TableContainer,\r\n    Table,\r\n    TableBody,\r\n    TableRow,\r\n    TableCell\r\n} from \"@material-ui/core\";\r\nimport { Pagination } from \"@material-ui/lab\";\r\n\r\n// Set the IP of your switch so it can connect in dev mode\r\nconst DEV_IP = \"http://192.168.178.46:1234\";\r\nconst getBackendURL = () => {\r\n    const DEV_MODE = process.env.NODE_ENV == \"development\";\r\n    return DEV_MODE ? DEV_IP : \"\";\r\n};\r\n\r\n// Create a light and dark material UI theme\r\nconst lightTheme = createTheme({\r\n    palette: {\r\n        type: \"light\",\r\n        primary: {\r\n            main: \"#04c7c3\",\r\n        },\r\n        secondary: {\r\n            main: \"#19857b\",\r\n        },\r\n        error: {\r\n            main: colors.red.A400,\r\n        },\r\n        background: {\r\n            default: \"#ebebeb\",\r\n        },\r\n    }\r\n});\r\n\r\nconst darkTheme = createTheme({\r\n    palette: {\r\n        type: \"dark\",\r\n        primary: {\r\n            main: \"#50f4dc\",\r\n        },\r\n        secondary: {\r\n            main: \"#19857b\",\r\n        },\r\n        error: {\r\n            main: colors.red.A400,\r\n        },\r\n        background: {\r\n            default: \"#2d2d2d\",\r\n        }\r\n    }\r\n});\r\n\r\nvar isSM = window.matchMedia(lightTheme.breakpoints.down('sm').replace(\"@media \", \"\")).matches;\r\n\r\n// Component for one gallery content\r\nclass GalleryItem extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            item: props.item,\r\n            isVideo: props.item.type === \"video\",\r\n            dialogOpen: false\r\n        };\r\n\r\n        this.imageClicked = this.imageClicked.bind(this);\r\n        this.dialogClose = this.dialogClose.bind(this);\r\n    }\r\n\r\n    imageClicked() {\r\n        this.setState({\r\n            dialogOpen: true\r\n        });\r\n    }\r\n\r\n    dialogClose() {\r\n        this.setState({\r\n            dialogOpen: false\r\n        });\r\n    }\r\n\r\n    getDateString() {\r\n        var date = new Date(this.state.item.takenAt * 1000);\r\n        var string = date.toLocaleDateString() + \" \" + date.toLocaleTimeString();\r\n\r\n        return string;\r\n    }\r\n\r\n    getDownloadFilename() {\r\n        var fileName;\r\n        var date = this.getDateString();\r\n        date = date.replace(/[:.\\s]/g, \"_\");\r\n        var extension = this.state.item.type === \"video\" ? \".mp4\" : \".jpg\";\r\n\r\n        fileName = this.state.item.game.replace(/\\s/g, \"_\") + \"_\" + date + extension;\r\n        return fileName;\r\n    }\r\n\r\n    // https://stackoverflow.com/a/20732091/5028730\r\n    humanFileSize(size) {\r\n        var i = Math.floor( Math.log(size) / Math.log(1024) );\r\n        return ( size / Math.pow(1024, i) ).toFixed(2) * 1 + ' ' + ['B', 'KB', 'MB', 'GB', 'TB'][i];\r\n    };\r\n\r\n    render() {\r\n        // Decide whether to show a video or an image element\r\n        let viewElement;\r\n        let viewElementBig;\r\n        const previewURL = getBackendURL() + \"/thumbnail?id=\" + this.state.item.id;\r\n        const fullURL = getBackendURL() + \"/file?id=\" + this.state.item.id;\r\n        if (this.state.isVideo) {\r\n            viewElement = <video src={fullURL} controls preload={\"none\"} poster={previewURL}></video>\r\n            viewElementBig = <video src={fullURL} controls preload={\"none\"} className={\"gallery-content-big\"} poster={previewURL}></video>;\r\n        } else {\r\n            viewElement = <img src={previewURL} alt=\"\"></img>\r\n            viewElementBig = <a href={fullURL} target=\"_blank\" rel=\"noreferrer\"><img src={fullURL} className={\"gallery-content-big\"} alt=\"\"></img></a>;\r\n        }\r\n\r\n        return (\r\n            <Grid item xs={isSM ? 12 : 4}>\r\n                <Paper onClick={this.imageClicked} elevation={2} className={\"grid-cell\"}>\r\n                    {viewElement}\r\n                </Paper>\r\n\r\n                <Dialog fullScreen={isSM} open={this.state.dialogOpen} onClose={this.dialogClose} aria-labelledby=\"responsive-dialog-title\">\r\n                    <DialogContent>\r\n                        {viewElementBig}\r\n                        <div className={\"gallery-content-bar\"}>\r\n                            <a download={this.getDownloadFilename()} href={this.state.item.path}><Button color=\"primary\"><i className={\"fas fa-download\"}></i> Download</Button></a>\r\n                        </div>\r\n                        <TableContainer>\r\n                            <Table>\r\n                                <TableBody>\r\n                                    <TableRow>\r\n                                        <TableCell><b>Type</b></TableCell>\r\n                                        <TableCell align=\"right\">{this.state.item.type === \"video\" ? \"Video\" : \"Screenshot\"}</TableCell>\r\n                                    </TableRow>\r\n                                    <TableRow>\r\n                                        <TableCell><b>Taken at</b></TableCell>\r\n                                        <TableCell align=\"right\">{this.getDateString()}</TableCell>\r\n                                    </TableRow>\r\n                                    <TableRow>\r\n                                        <TableCell><b>Game</b></TableCell>\r\n                                        <TableCell align=\"right\">{this.state.item.game}</TableCell>\r\n                                    </TableRow>\r\n                                    <TableRow>\r\n                                        <TableCell><b>Stored at</b></TableCell>\r\n                                        <TableCell align=\"right\">{this.state.item.storedAt === \"sd\" ? \"SD Card\" : \"Internal Storage\"}</TableCell>\r\n                                    </TableRow>\r\n                                    <TableRow>\r\n                                        <TableCell><b>Size</b></TableCell>\r\n                                        <TableCell align=\"right\">{this.humanFileSize(this.state.item.fileSize)}</TableCell>\r\n                                    </TableRow>\r\n                                </TableBody>\r\n                            </Table>\r\n                        </TableContainer>\r\n                    </DialogContent>\r\n                    <DialogActions>\r\n                        <Button color=\"primary\" onClick={this.dialogClose}>Close</Button>\r\n                    </DialogActions>\r\n                </Dialog>\r\n            </Grid>\r\n        );\r\n    }\r\n}\r\n\r\n// Component for the whole web app\r\nclass App extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            galleryContent: [],\r\n            currentPage: 1,\r\n            maxPages: 1,\r\n            currentTheme: \"light\",\r\n            error: false\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        // Fetch the gallery directly at the beginning\r\n        this.fetchGallery();\r\n    }\r\n\r\n    fetchGallery() {\r\n        fetch(getBackendURL() + \"/gallery?page=\" + this.state.currentPage)\r\n        .then(res => res.json())\r\n        .then((result) => {\r\n            this.setState({\r\n                galleryContent: result.gallery,\r\n                maxPages: result.pages,\r\n                currentTheme: result.theme,\r\n                error: false\r\n            })\r\n        }, (error) => {\r\n            this.setState({\r\n                error: true\r\n            });\r\n        });\r\n    }\r\n\r\n    onPageChange(e, page) {\r\n        this.setState({\r\n            currentPage: page\r\n        }, () => {\r\n            this.fetchGallery();\r\n        });\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <ThemeProvider theme={this.state.currentTheme === \"light\" ? lightTheme : darkTheme}>\r\n                <CssBaseline/>\r\n                <Container style={{flexGrow: 1, padding: \"8px\"}}>\r\n                    <Typography variant=\"h2\" color=\"textPrimary\" align=\"center\">NXGallery<a href={\"https://github.com/iUltimateLP/NXGallery\"} target={\"_blank\"} rel={\"noreferrer\"}><i className={`fab fa-github ${this.state.currentTheme}`}></i></a></Typography>\r\n                    <Typography variant=\"h6\" color=\"textSecondary\" align=\"center\" style={{paddingBottom: \"16px\", fontWeight: \"100\"}}>Browse your Nintendo Switch album with ease!</Typography>\r\n\r\n                    <Grid container spacing={2} justifyContent=\"center\">\r\n                        {this.state.galleryContent.map((value) => (\r\n                            <GalleryItem key={value.takenAt} item={value}/>\r\n                        ))}\r\n                    </Grid>\r\n\r\n                    {this.state.error && \r\n                        <Typography variant=\"h6\" color=\"error\" align=\"center\">Oh no, an error has occured :(</Typography>\r\n                    }\r\n\r\n                    {(this.state.galleryContent.length === 0 && !this.state.error) &&\r\n                        <Container align=\"center\" style={{paddingTop: \"20px\"}}>\r\n                            <CircularProgress color=\"primary\"></CircularProgress>\r\n                        </Container>\r\n                    }\r\n\r\n                    {(this.state.galleryContent.length > 0 && !this.state.error) && \r\n                        <Container align=\"center\" style={{paddingTop: \"20px\", paddingBottom: \"12px\"}}>\r\n                            <Pagination count={this.state.maxPages} className={\"pagination\"} onChange={(e, page) => this.onPageChange(e, page)}/>\r\n                        </Container>\r\n                    }\r\n\r\n                    <Container align=\"center\" className={\"footer\"}>\r\n                        <Typography variant=\"overline\" color=\"textSecondary\" align=\"center\">Made with</Typography>\r\n                        <Icon className={\"heart\"}>favorite</Icon>\r\n                        <Typography variant=\"overline\" color=\"textSecondary\" align=\"center\">in Bremen, Germany</Typography><br/>\r\n                    </Container>\r\n                </Container>\r\n            </ThemeProvider>\r\n        );\r\n    }\r\n}\r\n\r\nReactDOM.render(\r\n    // Render the app\r\n    <App/>,\r\n    document.querySelector(\"#app-root\")\r\n);\r\n"],"sourceRoot":""}