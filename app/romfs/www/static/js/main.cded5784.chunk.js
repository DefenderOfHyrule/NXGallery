(this["webpackJsonpnxgallery-frontend"]=this["webpackJsonpnxgallery-frontend"]||[]).push([[0],{194:function(e,t,a){"use strict";a.r(t);var r=a(59),n=a(60),i=a(35),c=a(63),s=a(62),l=a(0),o=a.n(l),h=a(12),d=a.n(h),j=a(48),g=a(61),b=a(189),m=a(191),O=a(205),x=a(207),p=a(192),u=a(208),y=a(209),f=a(210),v=a(49),k=a(18),C=a(211),S=a(212),w=a(213),N=a(50),D=a(38),P=a(214),T=a(215),_=a(216),G=a(3),A=Object(j.a)({palette:{type:"light",primary:{main:"#04c7c3"},secondary:{main:"#19857b"},error:{main:g.a.red.A400},background:{default:"#ebebeb"}}}),B=Object(j.a)({palette:{type:"dark",primary:{main:"#50f4dc"},secondary:{main:"#19857b"},error:{main:g.a.red.A400},background:{default:"#2d2d2d"}}}),F=window.matchMedia(A.breakpoints.down("sm").replace("@media ","")).matches,L=function(e){Object(c.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).state={item:e.item,isVideo:"video"===e.item.type,dialogOpen:!1},n.imageClicked=n.imageClicked.bind(Object(i.a)(n)),n.dialogClose=n.dialogClose.bind(Object(i.a)(n)),n}return Object(n.a)(a,[{key:"imageClicked",value:function(){this.setState({dialogOpen:!0})}},{key:"dialogClose",value:function(){this.setState({dialogOpen:!1})}},{key:"getDateString",value:function(){var e=new Date(1e3*this.state.item.takenAt);return e.toLocaleDateString()+" "+e.toLocaleTimeString()}},{key:"getDownloadFilename",value:function(){var e=this.getDateString();e=e.replace(/[:.\s]/g,"_");var t="video"===this.state.item.type?".mp4":".jpg";return this.state.item.game.replace(/\s/g,"_")+"_"+e+t}},{key:"render",value:function(){var e,t,a=""+this.state.item.path;return this.state.isVideo?(e=Object(G.jsx)("video",{src:a,controls:!0,preload:"none",poster:"assets/img/video_placeholder.jpg"}),t=Object(G.jsx)("video",{src:a,controls:!0,preload:"none",className:"gallery-content-big",poster:"assets/img/video_placeholder.jpg"})):(e=Object(G.jsx)("img",{src:a,poster:"assets/img/video_placeholder.jpg",alt:""}),t=Object(G.jsx)("a",{href:a,target:"_blank",rel:"noreferrer",children:Object(G.jsx)("img",{src:a,className:"gallery-content-big",poster:"assets/img/video_placeholder.jpg",alt:""})})),Object(G.jsxs)(b.a,{item:!0,xs:F?12:4,children:[Object(G.jsx)(m.a,{onClick:this.imageClicked,elevation:2,className:"grid-cell",children:e}),Object(G.jsxs)(O.a,{fullScreen:F,open:this.state.dialogOpen,onClose:this.dialogClose,"aria-labelledby":"responsive-dialog-title",children:[Object(G.jsxs)(x.a,{children:[t,Object(G.jsx)("div",{className:"gallery-content-bar",children:Object(G.jsx)("a",{download:this.getDownloadFilename(),href:this.state.item.path,children:Object(G.jsxs)(p.a,{color:"primary",children:[Object(G.jsx)("i",{className:"fas fa-download"})," Download"]})})}),Object(G.jsx)(u.a,{children:Object(G.jsx)(y.a,{children:Object(G.jsxs)(f.a,{children:[Object(G.jsxs)(v.a,{children:[Object(G.jsx)(k.a,{children:Object(G.jsx)("b",{children:"Type"})}),Object(G.jsx)(k.a,{align:"right",children:"video"===this.state.item.type?"Video":"Screenshot"})]}),Object(G.jsxs)(v.a,{children:[Object(G.jsx)(k.a,{children:Object(G.jsx)("b",{children:"Taken at"})}),Object(G.jsx)(k.a,{align:"right",children:this.getDateString()})]}),Object(G.jsxs)(v.a,{children:[Object(G.jsx)(k.a,{children:Object(G.jsx)("b",{children:"Game"})}),Object(G.jsx)(k.a,{align:"right",children:this.state.item.game})]}),Object(G.jsxs)(v.a,{children:[Object(G.jsx)(k.a,{children:Object(G.jsx)("b",{children:"Stored at"})}),Object(G.jsx)(k.a,{align:"right",children:"sd"===this.state.item.storedAt?"SD Card":"Internal Storage"})]})]})})})]}),Object(G.jsx)(C.a,{children:Object(G.jsx)(p.a,{autoFocus:!0,color:"primary",onClick:this.dialogClose,children:"Close"})})]})]})}}]),a}(o.a.Component),M=function(e){Object(c.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).state={galleryContent:[],currentPage:1,maxPages:1,currentTheme:"light",error:!1},n}return Object(n.a)(a,[{key:"componentDidMount",value:function(){this.fetchGallery()}},{key:"fetchGallery",value:function(){var e=this;fetch("/gallery?page="+this.state.currentPage).then((function(e){return e.json()})).then((function(t){e.setState({galleryContent:t.gallery,maxPages:t.pages,currentTheme:t.theme,error:!1})}),(function(t){e.setState({error:!0})}))}},{key:"onPageChange",value:function(e,t){var a=this;this.setState({currentPage:t},(function(){a.fetchGallery()}))}},{key:"render",value:function(){var e=this;return Object(G.jsxs)(S.a,{theme:"light"===this.state.currentTheme?A:B,children:[Object(G.jsx)(w.a,{}),Object(G.jsxs)(N.a,{style:{flexGrow:1,padding:"8px"},children:[Object(G.jsxs)(D.a,{variant:"h2",color:"textPrimary",align:"center",children:["NXGallery",Object(G.jsx)("a",{href:"https://github.com/iUltimateLP/NXGallery",target:"_blank",rel:"noreferrer",children:Object(G.jsx)("i",{className:"fab fa-github ".concat(this.state.currentTheme)})})]}),Object(G.jsx)(D.a,{variant:"h6",color:"textSecondary",align:"center",style:{paddingBottom:"16px",fontWeight:"100"},children:"Browse your Nintendo Switch album with ease!"}),Object(G.jsx)(b.a,{container:!0,spacing:2,justifyContent:"center",children:this.state.galleryContent.map((function(e){return Object(G.jsx)(L,{item:e},e.takenAt)}))}),this.state.error&&Object(G.jsx)(D.a,{variant:"h6",color:"error",align:"center",children:"Oh no, an error has occured :("}),0===this.state.galleryContent.length&&!this.state.error&&Object(G.jsx)(N.a,{align:"center",style:{paddingTop:"20px"},children:Object(G.jsx)(P.a,{color:"primary"})}),this.state.galleryContent.length>0&&!this.state.error&&Object(G.jsx)(N.a,{align:"center",style:{paddingTop:"20px",paddingBottom:"12px"},children:Object(G.jsx)(_.a,{count:this.state.maxPages,className:"pagination",onChange:function(t,a){return e.onPageChange(t,a)}})}),Object(G.jsxs)(N.a,{align:"center",className:"footer",children:[Object(G.jsx)(D.a,{variant:"overline",color:"textSecondary",align:"center",children:"Made with"}),Object(G.jsx)(T.a,{className:"heart",children:"favorite"}),Object(G.jsx)(D.a,{variant:"overline",color:"textSecondary",align:"center",children:"in Bremen, Germany"}),Object(G.jsx)("br",{})]})]})]})}}]),a}(o.a.Component);d.a.render(Object(G.jsx)(M,{}),document.querySelector("#app-root"))}},[[194,1,2]]]);
//# sourceMappingURL=main.cded5784.chunk.js.map