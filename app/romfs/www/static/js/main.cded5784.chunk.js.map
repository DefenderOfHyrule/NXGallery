{"version":3,"sources":["index.js"],"names":["lightTheme","createTheme","palette","type","primary","main","secondary","error","colors","red","A400","background","default","darkTheme","isSM","window","matchMedia","breakpoints","down","replace","matches","GalleryItem","props","state","item","isVideo","dialogOpen","imageClicked","bind","dialogClose","this","setState","date","Date","takenAt","toLocaleDateString","toLocaleTimeString","getDateString","extension","game","viewElement","viewElementBig","url","path","src","controls","preload","poster","className","alt","href","target","rel","xs","onClick","elevation","fullScreen","open","onClose","download","getDownloadFilename","color","align","storedAt","autoFocus","React","Component","App","galleryContent","currentPage","maxPages","currentTheme","fetchGallery","fetch","then","res","json","result","gallery","pages","theme","e","page","style","flexGrow","padding","variant","paddingBottom","fontWeight","container","spacing","justifyContent","map","value","length","paddingTop","count","onChange","onPageChange","ReactDOM","render","document","querySelector"],"mappings":"yYAyCMA,EAAaC,YAAY,CAC3BC,QAAS,CACLC,KAAM,QACNC,QAAS,CACLC,KAAM,WAEVC,UAAW,CACPD,KAAM,WAEVE,MAAO,CACHF,KAAMG,IAAOC,IAAIC,MAErBC,WAAY,CACRC,QAAS,cAKfC,EAAYZ,YAAY,CAC1BC,QAAS,CACLC,KAAM,OACNC,QAAS,CACLC,KAAM,WAEVC,UAAW,CACPD,KAAM,WAEVE,MAAO,CACHF,KAAMG,IAAOC,IAAIC,MAErBC,WAAY,CACRC,QAAS,cAKjBE,EAAOC,OAAOC,WAAWhB,EAAWiB,YAAYC,KAAK,MAAMC,QAAQ,UAAW,KAAKC,QAGjFC,E,kDACF,WAAYC,GAAQ,IAAD,8BACf,cAAMA,IAEDC,MAAQ,CACTC,KAAMF,EAAME,KACZC,QAA6B,UAApBH,EAAME,KAAKrB,KACpBuB,YAAY,GAGhB,EAAKC,aAAe,EAAKA,aAAaC,KAAlB,gBACpB,EAAKC,YAAc,EAAKA,YAAYD,KAAjB,gBAVJ,E,gDAanB,WACIE,KAAKC,SAAS,CACVL,YAAY,M,yBAIpB,WACII,KAAKC,SAAS,CACVL,YAAY,M,2BAIpB,WACI,IAAIM,EAAO,IAAIC,KAA+B,IAA1BH,KAAKP,MAAMC,KAAKU,SAGpC,OAFaF,EAAKG,qBAAuB,IAAMH,EAAKI,uB,iCAKxD,WACI,IACIJ,EAAOF,KAAKO,gBAChBL,EAAOA,EAAKb,QAAQ,UAAW,KAC/B,IAAImB,EAAqC,UAAzBR,KAAKP,MAAMC,KAAKrB,KAAmB,OAAS,OAG5D,OADW2B,KAAKP,MAAMC,KAAKe,KAAKpB,QAAQ,MAAO,KAAO,IAAMa,EAAOM,I,oBAIvE,WAEI,IAAIE,EACAC,EACEC,EA1FiB,GA0FOZ,KAAKP,MAAMC,KAAKmB,KAS9C,OARIb,KAAKP,MAAME,SACXe,EAAc,uBAAOI,IAAKF,EAAKG,UAAQ,EAACC,QAAS,OAAQC,OAAQ,qCACjEN,EAAiB,uBAAOG,IAAKF,EAAKG,UAAQ,EAACC,QAAS,OAAQE,UAAW,sBAAuBD,OAAQ,uCAEtGP,EAAc,qBAAKI,IAAKF,EAAKK,OAAQ,mCAAoCE,IAAI,KAC7ER,EAAiB,mBAAGS,KAAMR,EAAKS,OAAO,SAASC,IAAI,aAAlC,SAA+C,qBAAKR,IAAKF,EAAKM,UAAW,sBAAuBD,OAAQ,mCAAoCE,IAAI,QAIjK,eAAC,IAAD,CAAMzB,MAAI,EAAC6B,GAAIvC,EAAO,GAAK,EAA3B,UACI,cAAC,IAAD,CAAOwC,QAASxB,KAAKH,aAAc4B,UAAW,EAAGP,UAAW,YAA5D,SACKR,IAGL,eAAC,IAAD,CAAQgB,WAAY1C,EAAM2C,KAAM3B,KAAKP,MAAMG,WAAYgC,QAAS5B,KAAKD,YAAa,kBAAgB,0BAAlG,UACI,eAAC,IAAD,WACKY,EACD,qBAAKO,UAAW,sBAAhB,SACI,mBAAGW,SAAU7B,KAAK8B,sBAAuBV,KAAMpB,KAAKP,MAAMC,KAAKmB,KAA/D,SAAqE,eAAC,IAAD,CAAQkB,MAAM,UAAd,UAAwB,mBAAGb,UAAW,oBAAtC,mBAEzE,cAAC,IAAD,UACI,cAAC,IAAD,UACI,eAAC,IAAD,WACI,eAAC,IAAD,WACI,cAAC,IAAD,UAAW,uCACX,cAAC,IAAD,CAAWc,MAAM,QAAjB,SAAmD,UAAzBhC,KAAKP,MAAMC,KAAKrB,KAAmB,QAAU,kBAE3E,eAAC,IAAD,WACI,cAAC,IAAD,UAAW,2CACX,cAAC,IAAD,CAAW2D,MAAM,QAAjB,SAA0BhC,KAAKO,qBAEnC,eAAC,IAAD,WACI,cAAC,IAAD,UAAW,uCACX,cAAC,IAAD,CAAWyB,MAAM,QAAjB,SAA0BhC,KAAKP,MAAMC,KAAKe,UAE9C,eAAC,IAAD,WACI,cAAC,IAAD,UAAW,4CACX,cAAC,IAAD,CAAWuB,MAAM,QAAjB,SAAuD,OAA7BhC,KAAKP,MAAMC,KAAKuC,SAAoB,UAAY,kCAM9F,cAAC,IAAD,UACI,cAAC,IAAD,CAAQC,WAAS,EAACH,MAAM,UAAUP,QAASxB,KAAKD,YAAhD,+B,GA5FEoC,IAAMC,WAqG1BC,E,kDACF,WAAY7C,GAAQ,IAAD,8BACf,cAAMA,IAEDC,MAAQ,CACT6C,eAAgB,GAChBC,YAAa,EACbC,SAAU,EACVC,aAAc,QACdhE,OAAO,GARI,E,qDAYnB,WAEIuB,KAAK0C,iB,0BAGT,WAAgB,IAAD,OACXC,MAAwB,iBAAmB3C,KAAKP,MAAM8C,aACrDK,MAAK,SAAAC,GAAG,OAAIA,EAAIC,UAChBF,MAAK,SAACG,GACH,EAAK9C,SAAS,CACVqC,eAAgBS,EAAOC,QACvBR,SAAUO,EAAOE,MACjBR,aAAcM,EAAOG,MACrBzE,OAAO,OAEZ,SAACA,GACA,EAAKwB,SAAS,CACVxB,OAAO,S,0BAKnB,SAAa0E,EAAGC,GAAO,IAAD,OAClBpD,KAAKC,SAAS,CACVsC,YAAaa,IACd,WACC,EAAKV,oB,oBAIb,WAAU,IAAD,OACL,OACI,eAAC,IAAD,CAAeQ,MAAmC,UAA5BlD,KAAKP,MAAMgD,aAA2BvE,EAAaa,EAAzE,UACI,cAAC,IAAD,IACA,eAAC,IAAD,CAAWsE,MAAO,CAACC,SAAU,EAAGC,QAAS,OAAzC,UACI,eAAC,IAAD,CAAYC,QAAQ,KAAKzB,MAAM,cAAcC,MAAM,SAAnD,sBAAqE,mBAAGZ,KAAM,2CAA4CC,OAAQ,SAAUC,IAAK,aAA5E,SAA0F,mBAAGJ,UAAS,wBAAmBlB,KAAKP,MAAMgD,qBACzM,cAAC,IAAD,CAAYe,QAAQ,KAAKzB,MAAM,gBAAgBC,MAAM,SAASqB,MAAO,CAACI,cAAe,OAAQC,WAAY,OAAzG,0DAEA,cAAC,IAAD,CAAMC,WAAS,EAACC,QAAS,EAAGC,eAAe,SAA3C,SACK7D,KAAKP,MAAM6C,eAAewB,KAAI,SAACC,GAAD,OAC3B,cAACxE,EAAD,CAAiCG,KAAMqE,GAArBA,EAAM3D,cAI/BJ,KAAKP,MAAMhB,OACR,cAAC,IAAD,CAAY+E,QAAQ,KAAKzB,MAAM,QAAQC,MAAM,SAA7C,4CAGmC,IAArChC,KAAKP,MAAM6C,eAAe0B,SAAiBhE,KAAKP,MAAMhB,OACpD,cAAC,IAAD,CAAWuD,MAAM,SAASqB,MAAO,CAACY,WAAY,QAA9C,SACI,cAAC,IAAD,CAAkBlC,MAAM,cAI9B/B,KAAKP,MAAM6C,eAAe0B,OAAS,IAAMhE,KAAKP,MAAMhB,OAClD,cAAC,IAAD,CAAWuD,MAAM,SAASqB,MAAO,CAACY,WAAY,OAAQR,cAAe,QAArE,SACI,cAAC,IAAD,CAAYS,MAAOlE,KAAKP,MAAM+C,SAAUtB,UAAW,aAAciD,SAAU,SAAChB,EAAGC,GAAJ,OAAa,EAAKgB,aAAajB,EAAGC,QAIrH,eAAC,IAAD,CAAWpB,MAAM,SAASd,UAAW,SAArC,UACI,cAAC,IAAD,CAAYsC,QAAQ,WAAWzB,MAAM,gBAAgBC,MAAM,SAA3D,uBACA,cAAC,IAAD,CAAMd,UAAW,QAAjB,sBACA,cAAC,IAAD,CAAYsC,QAAQ,WAAWzB,MAAM,gBAAgBC,MAAM,SAA3D,gCAAmG,oC,GA5EzGG,IAAMC,WAoFxBiC,IAASC,OAEL,cAACjC,EAAD,IACAkC,SAASC,cAAc,gB","file":"static/js/main.cded5784.chunk.js","sourcesContent":["/*\r\n    NXGallery for Nintendo Switch\r\n    Made with love by Jonathan Verbeek (jverbeek.de)\r\n*/\r\n\r\nimport React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\n\r\n// Material UI imports\r\nimport {\r\n    colors,\r\n    CssBaseline,\r\n    ThemeProvider,\r\n    Typography,\r\n    Container,\r\n    createTheme,\r\n    Button,\r\n    Grid,\r\n    Paper,\r\n    Icon,\r\n    CircularProgress,\r\n    Dialog,\r\n    DialogContent,\r\n    DialogActions,\r\n    TableContainer,\r\n    Table,\r\n    TableBody,\r\n    TableRow,\r\n    TableCell\r\n} from \"@material-ui/core\";\r\nimport { Pagination } from \"@material-ui/lab\";\r\n\r\n// Toggle this flag when in dev mode (in that case it'll connect to the DEV_IP instead of trying localhost)\r\n// Useful for the web development!\r\nconst DEV_MODE = false;\r\nconst DEV_IP = \"http://192.168.178.46:1234\";\r\nconst getBackendURL = () => {\r\n    return DEV_MODE ? DEV_IP : \"\";\r\n};\r\n\r\n// Create a light and dark material UI theme\r\nconst lightTheme = createTheme({\r\n    palette: {\r\n        type: \"light\",\r\n        primary: {\r\n            main: \"#04c7c3\",\r\n        },\r\n        secondary: {\r\n            main: \"#19857b\",\r\n        },\r\n        error: {\r\n            main: colors.red.A400,\r\n        },\r\n        background: {\r\n            default: \"#ebebeb\",\r\n        },\r\n    }\r\n});\r\n\r\nconst darkTheme = createTheme({\r\n    palette: {\r\n        type: \"dark\",\r\n        primary: {\r\n            main: \"#50f4dc\",\r\n        },\r\n        secondary: {\r\n            main: \"#19857b\",\r\n        },\r\n        error: {\r\n            main: colors.red.A400,\r\n        },\r\n        background: {\r\n            default: \"#2d2d2d\",\r\n        }\r\n    }\r\n});\r\n\r\nvar isSM = window.matchMedia(lightTheme.breakpoints.down('sm').replace(\"@media \", \"\")).matches;\r\n\r\n// Component for one gallery content\r\nclass GalleryItem extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            item: props.item,\r\n            isVideo: props.item.type === \"video\",\r\n            dialogOpen: false\r\n        };\r\n\r\n        this.imageClicked = this.imageClicked.bind(this);\r\n        this.dialogClose = this.dialogClose.bind(this);\r\n    }\r\n\r\n    imageClicked() {\r\n        this.setState({\r\n            dialogOpen: true\r\n        });\r\n    }\r\n\r\n    dialogClose() {\r\n        this.setState({\r\n            dialogOpen: false\r\n        });\r\n    }\r\n\r\n    getDateString() {\r\n        var date = new Date(this.state.item.takenAt * 1000);\r\n        var string = date.toLocaleDateString() + \" \" + date.toLocaleTimeString();\r\n\r\n        return string;\r\n    }\r\n\r\n    getDownloadFilename() {\r\n        var fileName;\r\n        var date = this.getDateString();\r\n        date = date.replace(/[:.\\s]/g, \"_\");\r\n        var extension = this.state.item.type === \"video\" ? \".mp4\" : \".jpg\";\r\n\r\n        fileName = this.state.item.game.replace(/\\s/g, \"_\") + \"_\" + date + extension;\r\n        return fileName;\r\n    }\r\n\r\n    render() {\r\n        // Decide whether to show a video or an image element\r\n        let viewElement;\r\n        let viewElementBig;\r\n        const url = getBackendURL() + this.state.item.path;\r\n        if (this.state.isVideo) {\r\n            viewElement = <video src={url} controls preload={\"none\"} poster={\"assets/img/video_placeholder.jpg\"}></video>\r\n            viewElementBig = <video src={url} controls preload={\"none\"} className={\"gallery-content-big\"} poster={\"assets/img/video_placeholder.jpg\"}></video>;\r\n        } else {\r\n            viewElement = <img src={url} poster={\"assets/img/video_placeholder.jpg\"} alt=\"\"></img>\r\n            viewElementBig = <a href={url} target=\"_blank\" rel=\"noreferrer\"><img src={url} className={\"gallery-content-big\"} poster={\"assets/img/video_placeholder.jpg\"} alt=\"\"></img></a>;\r\n        }\r\n\r\n        return (\r\n            <Grid item xs={isSM ? 12 : 4}>\r\n                <Paper onClick={this.imageClicked} elevation={2} className={\"grid-cell\"}>\r\n                    {viewElement}\r\n                </Paper>\r\n\r\n                <Dialog fullScreen={isSM} open={this.state.dialogOpen} onClose={this.dialogClose} aria-labelledby=\"responsive-dialog-title\">\r\n                    <DialogContent>\r\n                        {viewElementBig}\r\n                        <div className={\"gallery-content-bar\"}>\r\n                            <a download={this.getDownloadFilename()} href={this.state.item.path}><Button color=\"primary\"><i className={\"fas fa-download\"}></i> Download</Button></a>\r\n                        </div>\r\n                        <TableContainer>\r\n                            <Table>\r\n                                <TableBody>\r\n                                    <TableRow>\r\n                                        <TableCell><b>Type</b></TableCell>\r\n                                        <TableCell align=\"right\">{this.state.item.type === \"video\" ? \"Video\" : \"Screenshot\"}</TableCell>\r\n                                    </TableRow>\r\n                                    <TableRow>\r\n                                        <TableCell><b>Taken at</b></TableCell>\r\n                                        <TableCell align=\"right\">{this.getDateString()}</TableCell>\r\n                                    </TableRow>\r\n                                    <TableRow>\r\n                                        <TableCell><b>Game</b></TableCell>\r\n                                        <TableCell align=\"right\">{this.state.item.game}</TableCell>\r\n                                    </TableRow>\r\n                                    <TableRow>\r\n                                        <TableCell><b>Stored at</b></TableCell>\r\n                                        <TableCell align=\"right\">{this.state.item.storedAt === \"sd\" ? \"SD Card\" : \"Internal Storage\"}</TableCell>\r\n                                    </TableRow>\r\n                                </TableBody>\r\n                            </Table>\r\n                        </TableContainer>\r\n                    </DialogContent>\r\n                    <DialogActions>\r\n                        <Button autoFocus color=\"primary\" onClick={this.dialogClose}>Close</Button>\r\n                    </DialogActions>\r\n                </Dialog>\r\n            </Grid>\r\n        );\r\n    }\r\n}\r\n\r\n// Component for the whole web app\r\nclass App extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            galleryContent: [],\r\n            currentPage: 1,\r\n            maxPages: 1,\r\n            currentTheme: \"light\",\r\n            error: false\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        // Fetch the gallery directly at the beginning\r\n        this.fetchGallery();\r\n    }\r\n\r\n    fetchGallery() {\r\n        fetch(getBackendURL() + \"/gallery?page=\" + this.state.currentPage)\r\n        .then(res => res.json())\r\n        .then((result) => {\r\n            this.setState({\r\n                galleryContent: result.gallery,\r\n                maxPages: result.pages,\r\n                currentTheme: result.theme,\r\n                error: false\r\n            })\r\n        }, (error) => {\r\n            this.setState({\r\n                error: true\r\n            });\r\n        });\r\n    }\r\n\r\n    onPageChange(e, page) {\r\n        this.setState({\r\n            currentPage: page\r\n        }, () => {\r\n            this.fetchGallery();\r\n        });\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <ThemeProvider theme={this.state.currentTheme === \"light\" ? lightTheme : darkTheme}>\r\n                <CssBaseline/>\r\n                <Container style={{flexGrow: 1, padding: \"8px\"}}>\r\n                    <Typography variant=\"h2\" color=\"textPrimary\" align=\"center\">NXGallery<a href={\"https://github.com/iUltimateLP/NXGallery\"} target={\"_blank\"} rel={\"noreferrer\"}><i className={`fab fa-github ${this.state.currentTheme}`}></i></a></Typography>\r\n                    <Typography variant=\"h6\" color=\"textSecondary\" align=\"center\" style={{paddingBottom: \"16px\", fontWeight: \"100\"}}>Browse your Nintendo Switch album with ease!</Typography>\r\n\r\n                    <Grid container spacing={2} justifyContent=\"center\">\r\n                        {this.state.galleryContent.map((value) => (\r\n                            <GalleryItem key={value.takenAt} item={value}/>\r\n                        ))}\r\n                    </Grid>\r\n\r\n                    {this.state.error && \r\n                        <Typography variant=\"h6\" color=\"error\" align=\"center\">Oh no, an error has occured :(</Typography>\r\n                    }\r\n\r\n                    {(this.state.galleryContent.length === 0 && !this.state.error) &&\r\n                        <Container align=\"center\" style={{paddingTop: \"20px\"}}>\r\n                            <CircularProgress color=\"primary\"></CircularProgress>\r\n                        </Container>\r\n                    }\r\n\r\n                    {(this.state.galleryContent.length > 0 && !this.state.error) && \r\n                        <Container align=\"center\" style={{paddingTop: \"20px\", paddingBottom: \"12px\"}}>\r\n                            <Pagination count={this.state.maxPages} className={\"pagination\"} onChange={(e, page) => this.onPageChange(e, page)}/>\r\n                        </Container>\r\n                    }\r\n\r\n                    <Container align=\"center\" className={\"footer\"}>\r\n                        <Typography variant=\"overline\" color=\"textSecondary\" align=\"center\">Made with</Typography>\r\n                        <Icon className={\"heart\"}>favorite</Icon>\r\n                        <Typography variant=\"overline\" color=\"textSecondary\" align=\"center\">in Bremen, Germany</Typography><br/>\r\n                    </Container>\r\n                </Container>\r\n            </ThemeProvider>\r\n        );\r\n    }\r\n}\r\n\r\nReactDOM.render(\r\n    // Render the app\r\n    <App/>,\r\n    document.querySelector(\"#app-root\")\r\n);\r\n"],"sourceRoot":""}